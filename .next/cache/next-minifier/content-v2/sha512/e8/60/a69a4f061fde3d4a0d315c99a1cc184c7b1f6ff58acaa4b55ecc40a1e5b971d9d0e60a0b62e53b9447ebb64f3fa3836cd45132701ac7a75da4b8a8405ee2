{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[30],{pqMH:function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/login\",function(){return r(\"yfTL\")}])},yfTL:function(t,e,r){\"use strict\";r.r(e);var a=r(\"o0o1\"),n=r.n(a),s=r(\"HaE+\"),o=r(\"1OyB\"),i=r(\"vuIU\"),c=r(\"Ji7U\"),u=r(\"md7G\"),l=r(\"foSv\"),p=r(\"q1tI\"),f=r.n(p),d=r(\"p46w\"),h=r.n(d),v=r(\"vDqi\"),m=r.n(v),w=f.a.createElement;function g(t){var e=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,a=Object(l.a)(t);if(e){var n=Object(l.a)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return Object(u.a)(this,r)}}var _=function(t){Object(c.a)(r,t);var e=g(r);function r(t){var a;return Object(o.a)(this,r),(a=e.call(this,t)).state={apiResponse:\"\",email:\"\",password:\"\",error:\"\",error_div:!1,fcmToken:\"\"},a}return Object(i.a)(r,[{key:\"componentDidMount\",value:function(){var t=Object(s.a)(n.a.mark((function t(){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case\"end\":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:\"log\",value:function(){var t=Object(s.a)(n.a.mark((function t(){var e,r,a=this;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.props.location.state,(void 0===e?{}:e).prevLocation,!1===/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(this.state.email)?this.setState({error:\"Incorrect Credentials\",error_div:!0}):this.state.password.length<1||this.state.email.length<1?this.setState({error:\"Please fill all required fields\",error_div:!0}):(this.setState({error_div:!1}),r={email:this.state.email,password:this.state.password},m.a.post(API_URL+\"login_admin\",r,{timeout:2e4}).then(function(){var t=Object(s.a)(n.a.mark((function t(e){var r,s,o;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),r=e.data.data._id,s=e.data.token,o=e.data.role,t.next=6,h.a.set(\"token\",s,{expires:14});case 6:h.a.set(\"id\",r,{expires:14}),h.a.set(\"role\",o,{expires:14}),a.props.setLog(),a.props.history.push(\"/dashboard\");case 10:case\"end\":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){console.log(t),a.setState({error:t.message,error_div:!0}),t.response&&(a.setState({error:JSON.stringify(t.response.message),error_div:!0}),console.log(JSON.stringify(t)))})));case 4:case\"end\":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:\"render\",value:function(){var t=this;return w(\"div\",{className:\"middle-box\"},w(\"p\",{className:\"login-text\"},\"Log In\"),w(\"p\",{className:\"sub-text\"},\"Welcome! Fill details below to login\"),this.state.error_div&&w(\"div\",{className:\"error\"},this.state.error),w(\"div\",{className:\"form-box\"},w(\"p\",{className:\"label-text\"},\"Email\"),w(\"input\",{type:\"email\",value:this.state.email,onChange:function(e){return t.setState({email:e.target.value})}}),w(\"p\",{className:\"label-text\"},\"Password\"),w(\"input\",{type:\"password\",value:this.state.password,onChange:function(e){return t.setState({password:e.target.value})}})),w(\"button\",{className:\"button\",onClick:this.log.bind(this)},\"Sign in\"))}}]),r}(p.Component);e.default=_}},[[\"pqMH\",0,2,1,5]]]);","extractedComments":[]}