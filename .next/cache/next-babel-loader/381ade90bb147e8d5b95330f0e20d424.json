{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\book24-web\\\\pages\\\\admin\\\\index.js\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport Calendar from 'react-calendar';\nimport Chart from \"chart.js\"; // import { API_URL } from '../../../root.js'\n\nimport axios from \"axios\";\nimport { IconContext } from \"react-icons\";\nimport Cookies from 'js-cookie';\nimport { MdViewQuilt } from \"react-icons/md\";\nimport { FaUsersCog, FaListAlt, FaUsers, FaMapMarkerAlt } from \"react-icons/fa\";\nimport Sidebar from \"./sidebar\";\n\nvar moment = require('moment');\n\nvar Admin = /*#__PURE__*/function (_Component) {\n  _inherits(Admin, _Component);\n\n  var _super = _createSuper(Admin);\n\n  function Admin(props) {\n    var _this;\n\n    _classCallCheck(this, Admin);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"chartRef\", /*#__PURE__*/React.createRef());\n\n    _this.state = {\n      first_name: '',\n      bookings: [],\n      users: []\n    };\n    return _this;\n  }\n\n  _createClass(Admin, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var myChartRef = this.chartRef.current.getContext(\"2d\");\n      new Chart(myChartRef, {\n        type: \"line\",\n        data: {\n          //Bring in data\n          labels: [\"Jan\", \"Feb\", \"March\"],\n          datasets: [{\n            label: \"Bookings\",\n            data: [86, 67, 91]\n          }]\n        },\n        options: {//Customize chart options\n        }\n      }); // this.getApiData();\n    }\n  }, {\n    key: \"getApiData\",\n    value: function () {\n      var _getApiData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        var _this2 = this;\n\n        var token, id, role, config;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return Cookies.get('token');\n\n              case 2:\n                token = _context3.sent;\n                // => 'value'\n                id = Cookies.get('id'); // => 'value'\n\n                role = Cookies.get('role');\n                config = {\n                  headers: {\n                    'Authorization': \"Bearer \" + token\n                  },\n                  timeout: 20000\n                };\n                _context3.next = 8;\n                return axios.get(API_URL + \"bookings\", config).then( /*#__PURE__*/function () {\n                  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(response) {\n                    var len, _loop, i;\n\n                    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                      while (1) {\n                        switch (_context2.prev = _context2.next) {\n                          case 0:\n                            console.log(response);\n\n                            if (response.data && response.data.length > 0) {\n                              console.log(\"response.data\");\n                              console.log(\"here\" + response.data);\n\n                              if (response.data.message == 'Token is not valid') {\n                                _this2.props.history.push(\"/\");\n                              }\n\n                              len = response.data.length;\n\n                              _this2.setState({\n                                bookings: []\n                              });\n\n                              _loop = function _loop(i) {\n                                var row = response.data[i];\n\n                                _this2.setState(function (prevState) {\n                                  return {\n                                    bookings: [].concat(_toConsumableArray(prevState.bookings), [row])\n                                  };\n                                });\n                              };\n\n                              for (i = 0; i < len; i++) {\n                                _loop(i);\n                              }\n                            }\n\n                            axios.get(API_URL + \"users/\" + _this2.props.id, config).then( /*#__PURE__*/function () {\n                              var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(response) {\n                                return _regeneratorRuntime.wrap(function _callee$(_context) {\n                                  while (1) {\n                                    switch (_context.prev = _context.next) {\n                                      case 0:\n                                        console.log(response);\n\n                                        if (response.data.message == 'Token is not valid') {\n                                          _this2.props.history.push(\"/\");\n                                        }\n\n                                        _this2.setState({\n                                          first_name: response.data.first_name\n                                        });\n\n                                        _context.next = 5;\n                                        return axios.get(API_URL + \"users\", config).then(function (response) {\n                                          console.log(response);\n\n                                          if (response.data.message == 'Token is not valid') {\n                                            _this2.props.history.push(\"/\");\n                                          }\n\n                                          var len = response.data.length;\n\n                                          _this2.setState({\n                                            users: []\n                                          });\n\n                                          var _loop2 = function _loop2(_i) {\n                                            var row = response.data[_i];\n\n                                            _this2.setState(function (prevState) {\n                                              return {\n                                                users: [].concat(_toConsumableArray(prevState.users), [row])\n                                              };\n                                            });\n                                          };\n\n                                          for (var _i = 0; _i < len; _i++) {\n                                            _loop2(_i);\n                                          }\n                                        })[\"catch\"](function (error) {\n                                          //    this.setState({regLoader: false})\n                                          if (error.code == 'ECONNABORTED') {//     Toast.show('Connection TImeout')\n                                          } else if (error.response.status == 404) {\n                                            _this2.props.history.push(\"/\");\n                                          } else {\n                                            //   Toast.show(error.message)\n                                            if (error.message == 'Token is not valid') {\n                                              _this2.props.history.push(\"/\");\n                                            }\n                                          }\n\n                                          console.log(error);\n                                        });\n\n                                      case 5:\n                                      case \"end\":\n                                        return _context.stop();\n                                    }\n                                  }\n                                }, _callee);\n                              }));\n\n                              return function (_x2) {\n                                return _ref2.apply(this, arguments);\n                              };\n                            }())[\"catch\"](function (error) {\n                              //    this.setState({regLoader: false})\n                              if (error.code == 'ECONNABORTED') {//     Toast.show('Connection TImeout')\n                              } else if (error.response.status == 404) {\n                                _this2.props.history.push(\"/\");\n                              } else {\n                                //   Toast.show(error.message)\n                                if (error.message == 'Token is not valid') {\n                                  _this2.props.history.push(\"/\");\n                                }\n                              }\n\n                              console.log(error);\n                            });\n\n                          case 3:\n                          case \"end\":\n                            return _context2.stop();\n                        }\n                      }\n                    }, _callee2);\n                  }));\n\n                  return function (_x) {\n                    return _ref.apply(this, arguments);\n                  };\n                }())[\"catch\"](function (error) {\n                  _this2.setState({\n                    regLoader: false\n                  });\n\n                  if (error.code == 'ECONNABORTED') {//     Toast.show('Connection TImeout')\n                  } else {\n                    //   Toast.show(error.message)\n                    if (error.message == 'Token is not valid') {\n                      _this2.props.history.push(\"/\");\n                    }\n                  }\n\n                  console.log(error);\n                });\n\n              case 8:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function getApiData() {\n        return _getApiData.apply(this, arguments);\n      }\n\n      return getApiData;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      return __jsx(\"div\", {\n        className: \"app-body\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 7\n        }\n      }, __jsx(Sidebar, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 7\n        }\n      }), __jsx(\"div\", {\n        className: \"main-box\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 7\n        }\n      }, __jsx(\"p\", {\n        className: \"welcome-header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 7\n        }\n      }, \"Hey \", this.state.first_name && this.state.first_name), __jsx(\"p\", {\n        className: \"date-text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 7\n        }\n      }, moment().format(\"dddd, MMMM Do YYYY\")), __jsx(\"div\", {\n        className: \"content-box\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 7\n        }\n      }, __jsx(\"div\", {\n        className: \"first-content-div\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 7\n        }\n      }, __jsx(\"div\", {\n        className: \"card-holder\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }\n      }, __jsx(\"div\", {\n        className: \"card-div\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }\n      }, __jsx(\"p\", {\n        className: \"total-text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 15\n        }\n      }, \"TOTAL BOOKING\"), __jsx(\"p\", {\n        className: \"total-value\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 15\n        }\n      }, this.state.bookings.length)), __jsx(\"div\", {\n        className: \"card-div\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 11\n        }\n      }, __jsx(\"p\", {\n        className: \"total-text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 15\n        }\n      }, \"TOTAL USERS\"), __jsx(\"p\", {\n        className: \"total-value\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 15\n        }\n      }, this.state.users.length))), __jsx(\"p\", {\n        className: \"daily-text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }\n      }, \"Daily Booking Analysis\"), __jsx(\"canvas\", {\n        id: \"myChart\",\n        ref: this.chartRef,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }\n      })), __jsx(\"div\", {\n        className: \"first-content-div\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 7\n        }\n      }, __jsx(Calendar, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 7\n        }\n      }), __jsx(\"p\", {\n        className: \"daily-text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 7\n        }\n      }, \"Booking Count\"), __jsx(\"div\", {\n        className: \"order-count-div\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 7\n        }\n      }, __jsx(\"p\", {\n        className: \"total-count-text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 7\n        }\n      }, \"This year: \", this.state.bookings.length), __jsx(\"p\", {\n        className: \"total-count-text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 7\n        }\n      }, \"This month: **\"))))));\n    }\n  }]);\n\n  return Admin;\n}(Component);\n\nexport default Admin;","map":{"version":3,"sources":["C:/book24-web/pages/admin/index.js"],"names":["React","Component","Calendar","Chart","axios","IconContext","Cookies","MdViewQuilt","FaUsersCog","FaListAlt","FaUsers","FaMapMarkerAlt","Sidebar","moment","require","Admin","props","createRef","state","first_name","bookings","users","myChartRef","chartRef","current","getContext","type","data","labels","datasets","label","options","get","token","id","role","config","headers","timeout","API_URL","then","response","console","log","length","message","history","push","len","setState","i","row","prevState","error","code","status","regLoader","format"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Calendar from 'react-calendar';\r\nimport Chart from \"chart.js\";\r\n// import { API_URL } from '../../../root.js'\r\nimport axios from \"axios\";\r\nimport { IconContext } from \"react-icons\";\r\nimport Cookies from 'js-cookie'\r\nimport { MdViewQuilt } from \"react-icons/md\";\r\nimport { FaUsersCog, FaListAlt, FaUsers, FaMapMarkerAlt } from \"react-icons/fa\";\r\nimport Sidebar from \"./sidebar\";\r\nvar moment = require('moment');\r\n\r\n\r\nclass Admin extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { \r\n        first_name: '', bookings: [], users: [] };\r\n  }\r\n\r\n  chartRef = React.createRef();\r\n    \r\n  componentDidMount() {\r\n      const myChartRef = this.chartRef.current.getContext(\"2d\");\r\n      new Chart(myChartRef, {\r\n          type: \"line\",\r\n          data: {\r\n              //Bring in data\r\n              labels: [\"Jan\", \"Feb\", \"March\"],\r\n              datasets: [\r\n                  {\r\n                      label: \"Bookings\",\r\n                      data: [86, 67, 91],\r\n                  }\r\n              ]\r\n          },\r\n          options: {\r\n              //Customize chart options\r\n          }\r\n      });\r\n     // this.getApiData();\r\n  }\r\n\r\n  async getApiData(){\r\n    // console.log(this.props.token)\r\n    // if(!this.props.token){\r\n    //   window.location.reload();\r\n    // }\r\n    let token = await Cookies.get('token') // => 'value'\r\nlet id = Cookies.get('id') // => 'value'\r\nlet role = Cookies.get('role')\r\n    var config = {\r\n        headers: {'Authorization': \"Bearer \" + token},\r\n        timeout: 20000\r\n    };\r\n    await axios\r\n    .get(\r\n      API_URL+\"bookings\", config\r\n    )\r\n    .then(async response => {\r\n      console.log(response);\r\n      if (response.data && response.data.length > 0) {\r\n        console.log(\"response.data\");\r\n          console.log(\"here\" + response.data);     \r\n         if(response.data.message == 'Token is not valid'){\r\n            this.props.history.push(\"/\");\r\n          }\r\n          var len = response.data.length;\r\n          this.setState({bookings: [],})\r\n          for (let i = 0; i < len; i++) {\r\n            let row = response.data[i];\r\n            this.setState(prevState => ({\r\n                bookings: [...prevState.bookings, row]\r\n              }));\r\n          }\r\n    }\r\n      axios.get(API_URL+\"users/\" + this.props.id, config).then(async response => {\r\n        console.log(response);\r\n        if(response.data.message == 'Token is not valid'){\r\n            this.props.history.push(\"/\");\r\n        }\r\n        this.setState({first_name: response.data.first_name})\r\n        await axios.get(API_URL+\"users\" , config).then(response => {\r\n            console.log(response);\r\n            if(response.data.message == 'Token is not valid'){\r\n                this.props.history.push(\"/\");\r\n            }\r\n            var len = response.data.length;\r\n          this.setState({users: [],})\r\n          for (let i = 0; i < len; i++) {\r\n            let row = response.data[i];\r\n            this.setState(prevState => ({\r\n                users: [...prevState.users, row]\r\n              }));\r\n          }\r\n          }).catch(error => {\r\n        //    this.setState({regLoader: false})\r\n          if(error.code == 'ECONNABORTED'){\r\n       //     Toast.show('Connection TImeout')\r\n        }else if(error.response.status == 404){\r\n            this.props.history.push(\"/\");\r\n        }else{\r\n       //   Toast.show(error.message)\r\n          if(error.message == 'Token is not valid'){\r\n            this.props.history.push(\"/\");\r\n          }\r\n        }\r\n          console.log(error);\r\n        });\r\n      }).catch(error => {\r\n    //    this.setState({regLoader: false})\r\n      if(error.code == 'ECONNABORTED'){\r\n   //     Toast.show('Connection TImeout')\r\n    }else if(error.response.status == 404){\r\n        this.props.history.push(\"/\");\r\n    }else{\r\n   //   Toast.show(error.message)\r\n      if(error.message == 'Token is not valid'){\r\n        this.props.history.push(\"/\");\r\n      }\r\n    }\r\n      console.log(error);\r\n    });\r\n    })\r\n    .catch(error => {\r\n        this.setState({regLoader: false})\r\n      if(error.code == 'ECONNABORTED'){\r\n   //     Toast.show('Connection TImeout')\r\n    }else{\r\n     //   Toast.show(error.message)\r\n        if(error.message == 'Token is not valid'){\r\n            this.props.history.push(\"/\");\r\n        }\r\n    }\r\n      console.log(error);\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"app-body\">\r\n      <Sidebar />\r\n      \r\n      <div className=\"main-box\">\r\n      <p className=\"welcome-header\">Hey {this.state.first_name && this.state.first_name}</p>\r\n      <p className=\"date-text\">\r\n      {moment().format(\"dddd, MMMM Do YYYY\")}\r\n      </p>\r\n      <div className=\"content-box\">\r\n      <div className=\"first-content-div\">\r\n          <div className=\"card-holder\">\r\n          <div className=\"card-div\">\r\n              <p className=\"total-text\">TOTAL BOOKING</p>\r\n              <p className=\"total-value\">{this.state.bookings.length}</p>             \r\n          </div>\r\n          <div className=\"card-div\">\r\n              <p className=\"total-text\">TOTAL USERS</p>\r\n              <p className=\"total-value\">{this.state.users.length}</p>             \r\n          </div>\r\n          </div>\r\n          <p className=\"daily-text\">Daily Booking Analysis</p>\r\n          <canvas\r\n                    id=\"myChart\"\r\n                    ref={this.chartRef}\r\n                />\r\n      </div>\r\n      <div className=\"first-content-div\">\r\n      <Calendar />\r\n      <p className=\"daily-text\">Booking Count</p>\r\n      <div className=\"order-count-div\">\r\n      <p className=\"total-count-text\">This year: {this.state.bookings.length}</p>\r\n      <p className=\"total-count-text\">This month: **</p>\r\n      </div>\r\n      </div>\r\n      </div>\r\n      </div></div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Admin;\r\n"]},"metadata":{},"sourceType":"module"}