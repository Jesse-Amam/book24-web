{"ast":null,"code":"var _jsxFileName = \"C:\\\\book24-web\\\\pages\\\\admin\\\\index.js\";\nvar __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from \"react\";\nimport Calendar from 'react-calendar';\nimport Chart from \"chart.js\"; // import { API_URL } from '../../../root.js'\n\nimport axios from \"axios\";\nimport { IconContext } from \"react-icons\";\nimport Cookies from 'js-cookie';\nimport { MdViewQuilt } from \"react-icons/md\";\nimport { FaUsersCog, FaListAlt, FaUsers, FaMapMarkerAlt } from \"react-icons/fa\";\nimport Sidebar from \"./sidebar\";\n\nvar moment = require('moment');\n\nclass Admin extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"chartRef\", /*#__PURE__*/React.createRef());\n\n    this.state = {\n      first_name: '',\n      bookings: [],\n      users: []\n    };\n  }\n\n  componentDidMount() {\n    const myChartRef = this.chartRef.current.getContext(\"2d\");\n    new Chart(myChartRef, {\n      type: \"line\",\n      data: {\n        //Bring in data\n        labels: [\"Jan\", \"Feb\", \"March\"],\n        datasets: [{\n          label: \"Bookings\",\n          data: [86, 67, 91]\n        }]\n      },\n      options: {//Customize chart options\n      }\n    }); // this.getApiData();\n  }\n\n  async getApiData() {\n    // console.log(this.props.token)\n    // if(!this.props.token){\n    //   window.location.reload();\n    // }\n    let token = await Cookies.get('token'); // => 'value'\n\n    let id = Cookies.get('id'); // => 'value'\n\n    let role = Cookies.get('role');\n    var config = {\n      headers: {\n        'Authorization': \"Bearer \" + token\n      },\n      timeout: 20000\n    };\n    await axios.get(API_URL + \"bookings\", config).then(async response => {\n      console.log(response);\n\n      if (response.data && response.data.length > 0) {\n        console.log(\"response.data\");\n        console.log(\"here\" + response.data);\n\n        if (response.data.message == 'Token is not valid') {\n          this.props.history.push(\"/\");\n        }\n\n        var len = response.data.length;\n        this.setState({\n          bookings: []\n        });\n\n        for (let i = 0; i < len; i++) {\n          let row = response.data[i];\n          this.setState(prevState => ({\n            bookings: [...prevState.bookings, row]\n          }));\n        }\n      }\n\n      axios.get(API_URL + \"users/\" + this.props.id, config).then(async response => {\n        console.log(response);\n\n        if (response.data.message == 'Token is not valid') {\n          this.props.history.push(\"/\");\n        }\n\n        this.setState({\n          first_name: response.data.first_name\n        });\n        await axios.get(API_URL + \"users\", config).then(response => {\n          console.log(response);\n\n          if (response.data.message == 'Token is not valid') {\n            this.props.history.push(\"/\");\n          }\n\n          var len = response.data.length;\n          this.setState({\n            users: []\n          });\n\n          for (let i = 0; i < len; i++) {\n            let row = response.data[i];\n            this.setState(prevState => ({\n              users: [...prevState.users, row]\n            }));\n          }\n        }).catch(error => {\n          //    this.setState({regLoader: false})\n          if (error.code == 'ECONNABORTED') {//     Toast.show('Connection TImeout')\n          } else if (error.response.status == 404) {\n            this.props.history.push(\"/\");\n          } else {\n            //   Toast.show(error.message)\n            if (error.message == 'Token is not valid') {\n              this.props.history.push(\"/\");\n            }\n          }\n\n          console.log(error);\n        });\n      }).catch(error => {\n        //    this.setState({regLoader: false})\n        if (error.code == 'ECONNABORTED') {//     Toast.show('Connection TImeout')\n        } else if (error.response.status == 404) {\n          this.props.history.push(\"/\");\n        } else {\n          //   Toast.show(error.message)\n          if (error.message == 'Token is not valid') {\n            this.props.history.push(\"/\");\n          }\n        }\n\n        console.log(error);\n      });\n    }).catch(error => {\n      this.setState({\n        regLoader: false\n      });\n\n      if (error.code == 'ECONNABORTED') {//     Toast.show('Connection TImeout')\n      } else {\n        //   Toast.show(error.message)\n        if (error.message == 'Token is not valid') {\n          this.props.history.push(\"/\");\n        }\n      }\n\n      console.log(error);\n    });\n  }\n\n  render() {\n    return __jsx(\"div\", {\n      className: \"app-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 7\n      }\n    }, __jsx(Sidebar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 7\n      }\n    }), __jsx(\"div\", {\n      className: \"main-box\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 7\n      }\n    }, __jsx(\"p\", {\n      className: \"welcome-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 7\n      }\n    }, \"Hey \", this.state.first_name && this.state.first_name), __jsx(\"p\", {\n      className: \"date-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 7\n      }\n    }, moment().format(\"dddd, MMMM Do YYYY\")), __jsx(\"div\", {\n      className: \"content-box\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 7\n      }\n    }, __jsx(\"div\", {\n      className: \"first-content-div\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 7\n      }\n    }, __jsx(\"div\", {\n      className: \"card-holder\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 11\n      }\n    }, __jsx(\"div\", {\n      className: \"card-div\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 11\n      }\n    }, __jsx(\"p\", {\n      className: \"total-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 15\n      }\n    }, \"TOTAL BOOKING\"), __jsx(\"p\", {\n      className: \"total-value\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 15\n      }\n    }, this.state.bookings.length)), __jsx(\"div\", {\n      className: \"card-div\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 11\n      }\n    }, __jsx(\"p\", {\n      className: \"total-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 15\n      }\n    }, \"TOTAL USERS\"), __jsx(\"p\", {\n      className: \"total-value\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 15\n      }\n    }, this.state.users.length))), __jsx(\"p\", {\n      className: \"daily-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 11\n      }\n    }, \"Daily Booking Analysis\"), __jsx(\"canvas\", {\n      id: \"myChart\",\n      ref: this.chartRef,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 11\n      }\n    })), __jsx(\"div\", {\n      className: \"first-content-div\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 7\n      }\n    }, __jsx(\"p\", {\n      className: \"daily-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 7\n      }\n    }, \"Booking Count\"), __jsx(\"div\", {\n      className: \"order-count-div\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 7\n      }\n    }, __jsx(\"p\", {\n      className: \"total-count-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 7\n      }\n    }, \"This year: \", this.state.bookings.length), __jsx(\"p\", {\n      className: \"total-count-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 7\n      }\n    }, \"This month: **\"))))));\n  }\n\n}\n\nexport default Admin;","map":{"version":3,"sources":["C:/book24-web/pages/admin/index.js"],"names":["React","Component","Calendar","Chart","axios","IconContext","Cookies","MdViewQuilt","FaUsersCog","FaListAlt","FaUsers","FaMapMarkerAlt","Sidebar","moment","require","Admin","constructor","props","createRef","state","first_name","bookings","users","componentDidMount","myChartRef","chartRef","current","getContext","type","data","labels","datasets","label","options","getApiData","token","get","id","role","config","headers","timeout","API_URL","then","response","console","log","length","message","history","push","len","setState","i","row","prevState","catch","error","code","status","regLoader","render","format"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,QAAP,MAAqB,gBAArB;AACA,OAAOC,KAAP,MAAkB,UAAlB,C,CACA;;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,SAASC,WAAT,QAA4B,gBAA5B;AACA,SAASC,UAAT,EAAqBC,SAArB,EAAgCC,OAAhC,EAAyCC,cAAzC,QAA+D,gBAA/D;AACA,OAAOC,OAAP,MAAoB,WAApB;;AACA,IAAIC,MAAM,GAAGC,OAAO,CAAC,QAAD,CAApB;;AAGA,MAAMC,KAAN,SAAoBd,SAApB,CAA8B;AAC5Be,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,mDAMRjB,KAAK,CAACkB,SAAN,EANQ;;AAEjB,SAAKC,KAAL,GAAa;AACTC,MAAAA,UAAU,EAAE,EADH;AACOC,MAAAA,QAAQ,EAAE,EADjB;AACqBC,MAAAA,KAAK,EAAE;AAD5B,KAAb;AAED;;AAIDC,EAAAA,iBAAiB,GAAG;AAChB,UAAMC,UAAU,GAAG,KAAKC,QAAL,CAAcC,OAAd,CAAsBC,UAAtB,CAAiC,IAAjC,CAAnB;AACA,QAAIxB,KAAJ,CAAUqB,UAAV,EAAsB;AAClBI,MAAAA,IAAI,EAAE,MADY;AAElBC,MAAAA,IAAI,EAAE;AACF;AACAC,QAAAA,MAAM,EAAE,CAAC,KAAD,EAAQ,KAAR,EAAe,OAAf,CAFN;AAGFC,QAAAA,QAAQ,EAAE,CACN;AACIC,UAAAA,KAAK,EAAE,UADX;AAEIH,UAAAA,IAAI,EAAE,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT;AAFV,SADM;AAHR,OAFY;AAYlBI,MAAAA,OAAO,EAAE,CACL;AADK;AAZS,KAAtB,EAFgB,CAkBjB;AACF;;AAED,QAAMC,UAAN,GAAkB;AAChB;AACA;AACA;AACA;AACA,QAAIC,KAAK,GAAG,MAAM7B,OAAO,CAAC8B,GAAR,CAAY,OAAZ,CAAlB,CALgB,CAKuB;;AAC3C,QAAIC,EAAE,GAAG/B,OAAO,CAAC8B,GAAR,CAAY,IAAZ,CAAT,CANoB,CAMO;;AAC3B,QAAIE,IAAI,GAAGhC,OAAO,CAAC8B,GAAR,CAAY,MAAZ,CAAX;AACI,QAAIG,MAAM,GAAG;AACTC,MAAAA,OAAO,EAAE;AAAC,yBAAiB,YAAYL;AAA9B,OADA;AAETM,MAAAA,OAAO,EAAE;AAFA,KAAb;AAIA,UAAMrC,KAAK,CACVgC,GADK,CAEJM,OAAO,GAAC,UAFJ,EAEgBH,MAFhB,EAILI,IAJK,CAIA,MAAMC,QAAN,IAAkB;AACtBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;;AACA,UAAIA,QAAQ,CAACf,IAAT,IAAiBe,QAAQ,CAACf,IAAT,CAAckB,MAAd,GAAuB,CAA5C,EAA+C;AAC7CF,QAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACED,QAAAA,OAAO,CAACC,GAAR,CAAY,SAASF,QAAQ,CAACf,IAA9B;;AACD,YAAGe,QAAQ,CAACf,IAAT,CAAcmB,OAAd,IAAyB,oBAA5B,EAAiD;AAC9C,eAAK/B,KAAL,CAAWgC,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACD;;AACD,YAAIC,GAAG,GAAGP,QAAQ,CAACf,IAAT,CAAckB,MAAxB;AACA,aAAKK,QAAL,CAAc;AAAC/B,UAAAA,QAAQ,EAAE;AAAX,SAAd;;AACA,aAAK,IAAIgC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,GAApB,EAAyBE,CAAC,EAA1B,EAA8B;AAC5B,cAAIC,GAAG,GAAGV,QAAQ,CAACf,IAAT,CAAcwB,CAAd,CAAV;AACA,eAAKD,QAAL,CAAcG,SAAS,KAAK;AACxBlC,YAAAA,QAAQ,EAAE,CAAC,GAAGkC,SAAS,CAAClC,QAAd,EAAwBiC,GAAxB;AADc,WAAL,CAAvB;AAGD;AACN;;AACClD,MAAAA,KAAK,CAACgC,GAAN,CAAUM,OAAO,GAAC,QAAR,GAAmB,KAAKzB,KAAL,CAAWoB,EAAxC,EAA4CE,MAA5C,EAAoDI,IAApD,CAAyD,MAAMC,QAAN,IAAkB;AACzEC,QAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;;AACA,YAAGA,QAAQ,CAACf,IAAT,CAAcmB,OAAd,IAAyB,oBAA5B,EAAiD;AAC7C,eAAK/B,KAAL,CAAWgC,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACH;;AACD,aAAKE,QAAL,CAAc;AAAChC,UAAAA,UAAU,EAAEwB,QAAQ,CAACf,IAAT,CAAcT;AAA3B,SAAd;AACA,cAAMhB,KAAK,CAACgC,GAAN,CAAUM,OAAO,GAAC,OAAlB,EAA4BH,MAA5B,EAAoCI,IAApC,CAAyCC,QAAQ,IAAI;AACvDC,UAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;;AACA,cAAGA,QAAQ,CAACf,IAAT,CAAcmB,OAAd,IAAyB,oBAA5B,EAAiD;AAC7C,iBAAK/B,KAAL,CAAWgC,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACH;;AACD,cAAIC,GAAG,GAAGP,QAAQ,CAACf,IAAT,CAAckB,MAAxB;AACF,eAAKK,QAAL,CAAc;AAAC9B,YAAAA,KAAK,EAAE;AAAR,WAAd;;AACA,eAAK,IAAI+B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,GAApB,EAAyBE,CAAC,EAA1B,EAA8B;AAC5B,gBAAIC,GAAG,GAAGV,QAAQ,CAACf,IAAT,CAAcwB,CAAd,CAAV;AACA,iBAAKD,QAAL,CAAcG,SAAS,KAAK;AACxBjC,cAAAA,KAAK,EAAE,CAAC,GAAGiC,SAAS,CAACjC,KAAd,EAAqBgC,GAArB;AADiB,aAAL,CAAvB;AAGD;AACA,SAbG,EAaDE,KAbC,CAaKC,KAAK,IAAI;AACpB;AACE,cAAGA,KAAK,CAACC,IAAN,IAAc,cAAjB,EAAgC,CACnC;AACE,WAFC,MAEI,IAAGD,KAAK,CAACb,QAAN,CAAee,MAAf,IAAyB,GAA5B,EAAgC;AAClC,iBAAK1C,KAAL,CAAWgC,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACH,WAFK,MAED;AACN;AACG,gBAAGO,KAAK,CAACT,OAAN,IAAiB,oBAApB,EAAyC;AACvC,mBAAK/B,KAAL,CAAWgC,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACD;AACF;;AACCL,UAAAA,OAAO,CAACC,GAAR,CAAYW,KAAZ;AACD,SA1BK,CAAN;AA2BD,OAjCD,EAiCGD,KAjCH,CAiCSC,KAAK,IAAI;AACpB;AACE,YAAGA,KAAK,CAACC,IAAN,IAAc,cAAjB,EAAgC,CACnC;AACE,SAFC,MAEI,IAAGD,KAAK,CAACb,QAAN,CAAee,MAAf,IAAyB,GAA5B,EAAgC;AAClC,eAAK1C,KAAL,CAAWgC,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACH,SAFK,MAED;AACN;AACG,cAAGO,KAAK,CAACT,OAAN,IAAiB,oBAApB,EAAyC;AACvC,iBAAK/B,KAAL,CAAWgC,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACD;AACF;;AACCL,QAAAA,OAAO,CAACC,GAAR,CAAYW,KAAZ;AACD,OA9CC;AA+CD,KApEK,EAqELD,KArEK,CAqECC,KAAK,IAAI;AACZ,WAAKL,QAAL,CAAc;AAACQ,QAAAA,SAAS,EAAE;AAAZ,OAAd;;AACF,UAAGH,KAAK,CAACC,IAAN,IAAc,cAAjB,EAAgC,CACnC;AACE,OAFC,MAEG;AACJ;AACG,YAAGD,KAAK,CAACT,OAAN,IAAiB,oBAApB,EAAyC;AACrC,eAAK/B,KAAL,CAAWgC,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACH;AACJ;;AACCL,MAAAA,OAAO,CAACC,GAAR,CAAYW,KAAZ;AACD,KAhFK,CAAN;AAiFD;;AAEDI,EAAAA,MAAM,GAAG;AACP,WACE;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA,MAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADA,EAEA;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAG,MAAA,SAAS,EAAC,gBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAmC,KAAK1C,KAAL,CAAWC,UAAX,IAAyB,KAAKD,KAAL,CAAWC,UAAvE,CADA,EAEA;AAAG,MAAA,SAAS,EAAC,WAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACCP,MAAM,GAAGiD,MAAT,CAAgB,oBAAhB,CADD,CAFA,EAKA;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAK,MAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAG,MAAA,SAAS,EAAC,YAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADJ,EAEI;AAAG,MAAA,SAAS,EAAC,aAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA4B,KAAK3C,KAAL,CAAWE,QAAX,CAAoB0B,MAAhD,CAFJ,CADA,EAKA;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAG,MAAA,SAAS,EAAC,YAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADJ,EAEI;AAAG,MAAA,SAAS,EAAC,aAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA4B,KAAK5B,KAAL,CAAWG,KAAX,CAAiByB,MAA7C,CAFJ,CALA,CADJ,EAWI;AAAG,MAAA,SAAS,EAAC,YAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAXJ,EAYI;AACU,MAAA,EAAE,EAAC,SADb;AAEU,MAAA,GAAG,EAAE,KAAKtB,QAFpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAZJ,CADA,EAkBA;AAAK,MAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEA;AAAG,MAAA,SAAS,EAAC,YAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAFA,EAGA;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAG,MAAA,SAAS,EAAC,kBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAA4C,KAAKN,KAAL,CAAWE,QAAX,CAAoB0B,MAAhE,CADA,EAEA;AAAG,MAAA,SAAS,EAAC,kBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAFA,CAHA,CAlBA,CALA,CAFA,CADF;AAqCD;;AAnK2B;;AAsK9B,eAAehC,KAAf","sourcesContent":["import React, { Component } from \"react\";\r\nimport Calendar from 'react-calendar';\r\nimport Chart from \"chart.js\";\r\n// import { API_URL } from '../../../root.js'\r\nimport axios from \"axios\";\r\nimport { IconContext } from \"react-icons\";\r\nimport Cookies from 'js-cookie'\r\nimport { MdViewQuilt } from \"react-icons/md\";\r\nimport { FaUsersCog, FaListAlt, FaUsers, FaMapMarkerAlt } from \"react-icons/fa\";\r\nimport Sidebar from \"./sidebar\";\r\nvar moment = require('moment');\r\n\r\n\r\nclass Admin extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { \r\n        first_name: '', bookings: [], users: [] };\r\n  }\r\n\r\n  chartRef = React.createRef();\r\n    \r\n  componentDidMount() {\r\n      const myChartRef = this.chartRef.current.getContext(\"2d\");\r\n      new Chart(myChartRef, {\r\n          type: \"line\",\r\n          data: {\r\n              //Bring in data\r\n              labels: [\"Jan\", \"Feb\", \"March\"],\r\n              datasets: [\r\n                  {\r\n                      label: \"Bookings\",\r\n                      data: [86, 67, 91],\r\n                  }\r\n              ]\r\n          },\r\n          options: {\r\n              //Customize chart options\r\n          }\r\n      });\r\n     // this.getApiData();\r\n  }\r\n\r\n  async getApiData(){\r\n    // console.log(this.props.token)\r\n    // if(!this.props.token){\r\n    //   window.location.reload();\r\n    // }\r\n    let token = await Cookies.get('token') // => 'value'\r\nlet id = Cookies.get('id') // => 'value'\r\nlet role = Cookies.get('role')\r\n    var config = {\r\n        headers: {'Authorization': \"Bearer \" + token},\r\n        timeout: 20000\r\n    };\r\n    await axios\r\n    .get(\r\n      API_URL+\"bookings\", config\r\n    )\r\n    .then(async response => {\r\n      console.log(response);\r\n      if (response.data && response.data.length > 0) {\r\n        console.log(\"response.data\");\r\n          console.log(\"here\" + response.data);     \r\n         if(response.data.message == 'Token is not valid'){\r\n            this.props.history.push(\"/\");\r\n          }\r\n          var len = response.data.length;\r\n          this.setState({bookings: [],})\r\n          for (let i = 0; i < len; i++) {\r\n            let row = response.data[i];\r\n            this.setState(prevState => ({\r\n                bookings: [...prevState.bookings, row]\r\n              }));\r\n          }\r\n    }\r\n      axios.get(API_URL+\"users/\" + this.props.id, config).then(async response => {\r\n        console.log(response);\r\n        if(response.data.message == 'Token is not valid'){\r\n            this.props.history.push(\"/\");\r\n        }\r\n        this.setState({first_name: response.data.first_name})\r\n        await axios.get(API_URL+\"users\" , config).then(response => {\r\n            console.log(response);\r\n            if(response.data.message == 'Token is not valid'){\r\n                this.props.history.push(\"/\");\r\n            }\r\n            var len = response.data.length;\r\n          this.setState({users: [],})\r\n          for (let i = 0; i < len; i++) {\r\n            let row = response.data[i];\r\n            this.setState(prevState => ({\r\n                users: [...prevState.users, row]\r\n              }));\r\n          }\r\n          }).catch(error => {\r\n        //    this.setState({regLoader: false})\r\n          if(error.code == 'ECONNABORTED'){\r\n       //     Toast.show('Connection TImeout')\r\n        }else if(error.response.status == 404){\r\n            this.props.history.push(\"/\");\r\n        }else{\r\n       //   Toast.show(error.message)\r\n          if(error.message == 'Token is not valid'){\r\n            this.props.history.push(\"/\");\r\n          }\r\n        }\r\n          console.log(error);\r\n        });\r\n      }).catch(error => {\r\n    //    this.setState({regLoader: false})\r\n      if(error.code == 'ECONNABORTED'){\r\n   //     Toast.show('Connection TImeout')\r\n    }else if(error.response.status == 404){\r\n        this.props.history.push(\"/\");\r\n    }else{\r\n   //   Toast.show(error.message)\r\n      if(error.message == 'Token is not valid'){\r\n        this.props.history.push(\"/\");\r\n      }\r\n    }\r\n      console.log(error);\r\n    });\r\n    })\r\n    .catch(error => {\r\n        this.setState({regLoader: false})\r\n      if(error.code == 'ECONNABORTED'){\r\n   //     Toast.show('Connection TImeout')\r\n    }else{\r\n     //   Toast.show(error.message)\r\n        if(error.message == 'Token is not valid'){\r\n            this.props.history.push(\"/\");\r\n        }\r\n    }\r\n      console.log(error);\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"app-body\">\r\n      <Sidebar />\r\n      <div className=\"main-box\">\r\n      <p className=\"welcome-header\">Hey {this.state.first_name && this.state.first_name}</p>\r\n      <p className=\"date-text\">\r\n      {moment().format(\"dddd, MMMM Do YYYY\")}\r\n      </p>\r\n      <div className=\"content-box\">\r\n      <div className=\"first-content-div\">\r\n          <div className=\"card-holder\">\r\n          <div className=\"card-div\">\r\n              <p className=\"total-text\">TOTAL BOOKING</p>\r\n              <p className=\"total-value\">{this.state.bookings.length}</p>             \r\n          </div>\r\n          <div className=\"card-div\">\r\n              <p className=\"total-text\">TOTAL USERS</p>\r\n              <p className=\"total-value\">{this.state.users.length}</p>             \r\n          </div>\r\n          </div>\r\n          <p className=\"daily-text\">Daily Booking Analysis</p>\r\n          <canvas\r\n                    id=\"myChart\"\r\n                    ref={this.chartRef}\r\n                />\r\n      </div>\r\n      <div className=\"first-content-div\">\r\n      {/* <Calendar /> */}\r\n      <p className=\"daily-text\">Booking Count</p>\r\n      <div className=\"order-count-div\">\r\n      <p className=\"total-count-text\">This year: {this.state.bookings.length}</p>\r\n      <p className=\"total-count-text\">This month: **</p>\r\n      </div>\r\n      </div>\r\n      </div>\r\n      </div></div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Admin;\r\n"]},"metadata":{},"sourceType":"module"}